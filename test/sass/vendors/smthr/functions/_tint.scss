@use 'sass:color';
@use 'sass:math';
@use 'sass:meta';
@use 'is-percentage' as *;

/// Lighten a color by a given percentage using the built-in color.scale() method.
///
/// @param {Color} $color - The color being lightened.
/// @param {Number} $percentage - The percentage of lightness to add to the color.
///
/// @return {Color} - The lightened color.
///
/// @access public
/// @group Utilities
///
/// @throw Invalid $color type.
/// @throw Invalid $percentage type.
@function tint($color, $percentage) {
  @if meta.type-of($color) != 'color' {
    @error 'Invalid data type passed to [ tint() ] function. You passed ' +
      '#{meta.inspect($color)} for the $color argument, which is not a ' +
      'a color that can be darkened by this function.';
  }

  // If $percentage is a unitless number, convert to a percentage.
  @if meta.type-of($percentage) == 'number' and math.is-unitless($percentage) {
    // When converting, if it is between -1 and 1, assume the user meant it as a
    // decimal that represents a percentage (ex: 0.6 = 60%). Otherwise, assume
    // it is just a percentage missing its % sign (ex: 60 = 60%).
    @if $percentage > -1 and $percentage < 1 {
      $percentage: math.percentage($percentage);
    } @else {
      $percentage: $percentage * 1%;
    }
  }

  @if not is-percentage($percentage) {
    @error 'Invalid data type passed to [ tint() ] function. You passed ' +
      '#{meta.inspect($percentage)} for the $percentage argument, which is ' +
      'not a valid perecentage.';
  }

  @return color.scale($color, $lightness: $percentage);
}

/// Lighten a color by a given percentage using the built-in color.scale() method.
///
/// @param {Color} $color - The color being lightened.
/// @param {Number} $percentage - The percentage of lightness to add to the color.
///
/// @return {Color} - The lightened color.
///
/// @access public
/// @group Utilities
///
/// @throw Invalid $color type.
/// @throw Invalid $percentage type.
///
/// @alias tint
@function lighter($color, $percentage) {
  @return tint($color, $percentage);
}
