// stylelint-disable scss/dollar-variable-default
@use 'sass:color';
@use 'sass:list';
@use 'sass:map';
@use 'sass:math';
@use 'sass:meta';
@use 'sass:selector';
@use 'sass:string';
@use '../src/smthr/smth' as *;

.container {
  display: grid;
  place-items: center;
  width: 100%;
  height: 100dvh;
}

.controls-wrapper {
  position: absolute;
  top: 2%;
  z-index: 9999;
}

.stage-title {
  position: absolute;
  top: 10%;
  @include text-tracking-in('expand', true, null, 1.7s);
}

.stage {
  @include animation-stage(500px, 50% 55%, 80%, 900, 80vh);
  @include gradient(conv-color(rgba(#80f, 0.3), hsl), rgba(blue, 0.5), 135deg);
  @include flex-center($flex-dir: 'column');

  border: 4px solid #000;
  margin: 0 auto;
}

.card {
  @include roll(in, $iterations: 1);
  @include clamp-width(11rem, 35%, 22rem);
  @include clamp-height(5.5rem, 40%, 22rem);
  @include depth-level(2, #fff);
  @include font(
    4rem,
    900,
    normal,
    small-caps,
    1.5,
    system-ui,
    semi-expanded,
    1.5px
  );

  position: relative;
  border: 8px solid conv-color(#08f, 'hsl');
  border-radius: 10px;
  background-color: conv-color(#08f, 'hsl');
  text-align: center;
  transition-property: transform, box-shadow, border-color, background-color;
  transition-duration: 200ms;
  transition-timing-function: ease-out;

  &:hover {
    @include depth-level(5, #fff);
    // @include wobbliness(top);
    @include roll(out, down);


    border-color: tint(rgba(#08f, 0.8), 10%);
    transform: translateY(-1.06%) scale(1.021212);
  }

  &:active {
    @include depth-level(0);

    border-color: shade(rgba(#08f, 0.8), 10%);
    transform: none;
  }
}

$flip-axis: 'horiz';

.active-anim {
  // @include flip(forwards, $flip-axis, 0.6s, $anim-dir: alternate);
  // @include flip-scale(top, $flip-axis, 0.6s, $anim-dir: alternate);
  @include flip-scale-2(
    bottom,
    0.6s,
    $anim-dir: alternate,
    $timing-func: linear
  );
}

.active-anim-rev {
  // @include flip(
  //   forwards,
  //   $flip-axis,
  //   0.6s,
  //   $anim-dir: alternate-reverse,
  //   $anim-num: 2
  // );
  // @include flip-scale(
  //   top,
  //   $flip-axis,
  //   0.6s,
  //   $anim-dir: alternate-reverse,
  //   $anim-num: 2
  // );
  @include flip-scale-2(
    bottom,
    0.6s,
    $anim-dir: alternate-reverse,
    $timing-func: linear,
    $anim-num: 2
  );
}

.front {
  @include animation-front-face;
  @include flex-center;

  border-radius: 10px;
  background: conv-color(#2dccb8, hwb) padding-box;
  text-align: center;
}

.back {
  @include animation-back-face($flip-axis);
  @include flex-center;

  border-radius: 10px;
  background: conv-color(#111, hsl) padding-box;
  color: #fff;
  text-align: center;
}

.btn {
  @include reset;
  @include button-base(
    rgba(#08f, 1),
    #fff,
    6px ridge rgba(#80f, 0.8),
    16px,
    0 1rem,
    0.875rem 1.75rem,
    system-ui,
    1.5rem
  );
  @include depth-level(2);

  transition-property: transform, box-shadow, border-color, background-color;
  transition-duration: 150ms;
  transition-timing-function: ease-out;

  &:hover {
    @include depth-level(5);

    border-color: tint(rgba(#80f, 0.8), 10%);
    background-color: tint(rgba(#08f, 1), 10%);
    transform: translateY(-2px) scale(1.005);
  }

  &:active {
    @include depth-level(0);

    border-color: shade(rgba(#80f, 0.8), 10%);
    background-color: shade(rgba(#08f, 1), 10%);
    transform: none;
  }
}

.ribbon {
  @include corner-ribbon;

  @include font(1.5rem, 700, normal, $height: 1, $family: (system-ui, sans-serif));

  color: #fff;

  &:hover {
    @include text-glitch(
      3s,
      $iterations: infinite,
      $anim-dir: alternate-reverse,
      $use-margin: true
    );
  }
}
